(this["webpackJsonpcloud-reactapp"]=this["webpackJsonpcloud-reactapp"]||[]).push([[0],{37:function(e,t,n){e.exports=n.p+"static/media/network-error.9032283e.svg"},41:function(e,t,n){e.exports=n(62)},49:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(31),l=n.n(r),o=n(2),c=n(3),s=n(5),u=n(4),p=n(6),d=n(8),f=n(7),h=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={id:"_"+Math.random().toString(36).substr(2,9),open:!1},n.toggleState=function(){n.setState((function(e){return{open:!e.open}}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.open,n=this.props.tag||"div",a=Object(f.a)({},this.props.btn);a.attrs||(a.attrs={}),a.attrs.className||(a.attrs.className=""),a.attrs.className.includes("dropdown-toggle")||(a.attrs.className="dropdown-toggle ".concat(a.attrs.className));var r=a.attrs.id||this.state.id,l=this.props.btn.tag||"div";return i.a.createElement(n,Object.assign({},this.props,{className:"dropdown".concat(t?" show":"").concat(this.props.className?" ".concat(this.props.className):""),onClick:function(){return e.toggleState()}}),i.a.createElement(l,Object.assign({id:r,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":t},a.attrs),a.text),i.a.createElement("div",{className:"dropdown-menu".concat(t?" show":"").concat("right"===this.props.direction?" dropdown-menu-right":""),"aria-labelledby":r},this.props.children))}}]),t}(a.Component),m=n(63);function b(e,t){return{type:"ADD_NOTIFICATION",notification:{id:Date.now(),shortText:e,longText:t}}}function v(e){return{type:"REMOVE_NOTIFICATION",notification:e}}var E=n(35);function g(e){return("/"===e.slice(-1)?e.substring(0,e.length-1):e).split("/").map((function(e,t,n){return{route:n.filter((function(e,n){return n<=t})).join("/"),folderName:e}}))}function y(e){return{type:"RECEIVE_FILE_LIST",fileList:e.sort((function(e,t){return e.type===t.type?e.firstname<t.firstname?-1:e.firstname>t.firstname?1:0:"dir"===e.type&&"file"===t.type?-1:1}))}}function w(e){return function(t){return t(function(e){return{type:"REQUEST_FILE_LIST",breadcrumb:g(e),path:e}}(e)),fetch("".concat("/api/cloud/dir","?url=").concat(e),{method:"GET",credentials:"include"}).then((function(e){e.ok?e.json().then((function(e){return t(y(e))})):e.text().then((function(n){t(y([])),t(b(e.statusText,n))}))}))}}function N(e){return function(t){return fetch("".concat("/api/cloud/dir","?url=").concat(e),{method:"GET",credentials:"include"}).then((function(e){e.ok?e.json().then((function(e){return t(function(e){return{type:"REFRESH_FILE_LIST",fileList:e.sort((function(e,t){return"dir"===e.type&&"file"===t.type?1:e.type===t.type?e.firstname<t.firstname?-1:e.firstname>t.firstname?1:0:"dir"===e.type&&"file"===t.type?1:-1}))}}(e))})):e.text().then((function(n){t(y([])),t(b(e.statusText,n))}))}))}}function O(e){return{type:"TOGGLE_SELECT_FILE",file:e}}function k(e){return{type:"SELECT_ALL_FILES",selectStatus:e}}function C(e){return{type:"ENABLE_FILE_EDIT_NAME",file:e}}function j(e){return{type:"DISABLE_FILE_EDIT_NAME",file:e}}function x(e,t){return function(n){return n({type:"HIDE_NEW_DIR"}),fetch("/api/cloud/dir",{method:"POST",credentials:"include",body:JSON.stringify({url:e+"/"+t})}).then((function(t){t.ok?t.json().then((function(t){n(N(e)),n(b(t.msg,t.detail))})):t.text().then((function(e){n(y([])),n(b(t.statusText,e))}))}))}}function L(e,t){return function(n){return n({type:"HIDE_NEW_FILE"}),fetch("/api/cloud/file",{method:"POST",credentials:"include",body:JSON.stringify({url:e+"/"+t})}).then((function(t){t.ok?t.json().then((function(t){n(N(e)),n(b(t.msg,t.detail))})):t.text().then((function(e){n(y([])),n(b(t.statusText,e))}))}))}}function _(e,t){return function(n){return fetch("/api/cloud/file",{method:"PUT",credentials:"include",body:JSON.stringify({url:e.url,newurl:t})}).then((function(t){t.ok?t.json().then((function(t){n(N(e.url.replace(e.name,""))),n(b(t.msg,t.detail))})):t.text().then((function(e){n(y([])),n(b(t.statusText,e))}))}))}}function S(e,t){return function(n){fetch("/api/cloud/zip",{method:"POST",credentials:"include",body:JSON.stringify({url:t,files:e})}).then((function(e){e.ok?e.json().then((function(e){n(N(t)),n(b(e.msg,e.detail))})):e.text().then((function(t){n(y([])),n(b(e.statusText,t))}))}))}}function I(e,t){return function(n){for(var a in e)fetch("/api/cloud/file",{method:"DELETE",credentials:"include",body:JSON.stringify({url:a})}).then((function(e){e.ok?e.json().then((function(e){n(N(t)),n(b(e.msg,e.detail))})):e.text().then((function(t){n(y([])),n(b(e.statusText,t))}))}))}}function T(e){return function(t){fetch("/api/cloud/file?url="+e.url,{method:"GET",credentials:"include"}).then((function(n){n.ok?n.blob().then((function(t){return Object(E.saveAs)(t,e.name)})):n.text().then((function(e){t(b(n.statusText,e))}))}))}}function F(e){return{type:"SORT_BY",prop:e}}function R(e){return{type:"UPDATE_FILTER",filter:e}}var D=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleUploadFilesClicked=function(){n.props.dropzone.ref.open()},n.handleNewDirClicked=function(){n.props.dispatch({type:"TOGGLE_NEW_DIR"})},n.handleNewFileClicked=function(){n.props.dispatch({type:"TOGGLE_NEW_FILE"})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data[this.props.data.length-1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"d-inline-block overflow-auto",style:{scrollbarWidth:"thin"}},i.a.createElement("ol",{"aria-label":"breadcrumb",className:"breadcrumb flex-nowrap overflow-auto mb-0 pl-0 pr-0 bg-transparent",style:{width:"max-content"}},this.props.data.map((function(t,n){return n===e.props.data.length-1?i.a.createElement("li",{className:"breadcrumb-item text-nowrap",key:t.route}):i.a.createElement("li",{className:"breadcrumb-item text-nowrap",key:t.route},i.a.createElement(m.a,{to:"".concat(t.route).concat(window.location.hash),className:"breadcrumb-item text-nowrap"},t.route?t.folderName:"Home"))})))),this.props.data.length&&i.a.createElement(h,{className:"breadcrumb-item active text-nowrap mr-auto d-inline-block","aria-current":"page",tag:"div",btn:{text:t.route?t.folderName:"Home",tag:"button",attrs:{className:"btn btn-outline-primary"}},direction:t.route?"right":"left"},i.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleNewFileClicked()}},"New file"),i.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleNewDirClicked()}},"New folder"),i.a.createElement("div",{className:"dropdown-divider"}),i.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleUploadFilesClicked()}},"Upload file")))}}]),t}(a.Component),A=Object(d.b)((function(e){return{}}))(D),z=n(40);function P(e){return function(t){t(function(e){return{type:"ADD_PREVIEW_FILE",file:e}}(e)),fetch("/api/cloud/file?url="+e.url,{method:"GET"}).then((function(n){n.ok?n.blob().then((function(n){t(M(e,n))})):n.text().then((function(a){t(M(e,{type:"error"})),t(b(n.statusText,a))}))}))}}function H(e){return{type:"REMOVE_PREVIEW_FILE",url:e}}function M(e,t){return{type:"RECEIVE_PREVIEW_CONTENT",blob:t,file:e}}function B(e){return{type:"UPDATE_PREVIEW_TAB",index:e}}function W(e,t){return function(n){fetch("/api/cloud/file",{method:"PUT",body:JSON.stringify({url:e,content:t})}).then((function(e){e.ok?e.json().then((function(e){n(b(e.msg,e.detail))})):e.text().then((function(t){n(b(e.statusText,t))}))}))}}var V=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"humanFileSize",value:function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return isNaN(e)?"":0===e?"0 B":1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}},{key:"render",value:function(){return i.a.createElement("span",this.props,this.humanFileSize(this.props.children))}}]),t}(a.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"timeDifference",value:function(e,t){var n=e-t;return n<6e4?Math.round(n/1e3)+(n/1e3<2?" second":" seconds")+" ago":n<36e5?Math.round(n/6e4)+(n/6e4<2?" minute":" minutes")+" ago":n<864e5?Math.round(n/36e5)+(n/36e5<2?" hour":" hours")+" ago":n<2592e6?Math.round(n/864e5)+(n/864e5<2?" day":" days")+" ago":n<31536e6?Math.round(n/2592e6)+(n/2592e6<2?" month":" months")+" ago":Math.round(n/31536e6)+(n/31536e6<2?" year":" years")+" ago"}},{key:"render",value:function(){return i.a.createElement("span",Object.assign({},this.props,{title:""===this.props.children||"undefined"===typeof this.props.children?"":new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(this.props.children)}),this.timeDifference(Date.now(),this.props.children))}}]),t}(a.Component),G={folder:i.a.createElement("svg",{className:"bi bi-folder",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M11.828 6a3 3 0 01-2.12-.879l-.83-.828A1 1 0 008.173 4H4.5a1 1 0 00-1 .981L3.546 6h-1L2.5 5a2 2 0 012-2h3.672a2 2 0 011.414.586l.828.828A2 2 0 0011.828 5v1z"}),i.a.createElement("path",{fillRule:"evenodd",d:"M15.81 6H4.19a1 1 0 00-.996 1.09l.637 7a1 1 0 00.995.91h10.348a1 1 0 00.995-.91l.637-7A1 1 0 0015.81 6zM4.19 5a2 2 0 00-1.992 2.181l.637 7A2 2 0 004.826 16h10.348a2 2 0 001.991-1.819l.637-7A2 2 0 0015.81 5H4.19z",clipRule:"evenodd"})),text_file:i.a.createElement("svg",{className:"bi bi-document-text",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M6 3h8a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V5a2 2 0 012-2zm0 1a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1V5a1 1 0 00-1-1H6z",clipRule:"evenodd"}),i.a.createElement("path",{fillRule:"evenodd",d:"M6.5 14a.5.5 0 01.5-.5h3a.5.5 0 010 1H7a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h6a.5.5 0 010 1H7a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h6a.5.5 0 010 1H7a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h6a.5.5 0 010 1H7a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h6a.5.5 0 010 1H7a.5.5 0 01-.5-.5z",clipRule:"evenodd"})),uncheck_box:i.a.createElement("svg",{className:"bi bi-check-box",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M3.5 15A1.5 1.5 0 005 16.5h10a1.5 1.5 0 001.5-1.5v-5a.5.5 0 00-1 0v5a.5.5 0 01-.5.5H5a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h8a.5.5 0 000-1H5A1.5 1.5 0 003.5 5v10z",clipRule:"evenodd"})),check_box:i.a.createElement("svg",{className:"bi bi-check-box",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M17.354 4.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3-3a.5.5 0 11.708-.708L10 11.293l6.646-6.647a.5.5 0 01.708 0z",clipRule:"evenodd"}),i.a.createElement("path",{fillRule:"evenodd",d:"M3.5 15A1.5 1.5 0 005 16.5h10a1.5 1.5 0 001.5-1.5v-5a.5.5 0 00-1 0v5a.5.5 0 01-.5.5H5a.5.5 0 01-.5-.5V5a.5.5 0 01.5-.5h8a.5.5 0 000-1H5A1.5 1.5 0 003.5 5v10z",clipRule:"evenodd"})),check:i.a.createElement("svg",{className:"bi bi-check",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M15.854 5.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3.5-3.5a.5.5 0 11.708-.708L8.5 12.293l6.646-6.647a.5.5 0 01.708 0z",clipRule:"evenodd"})),cross:i.a.createElement("svg",{className:"bi bi-x",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M5.646 5.646a.5.5 0 000 .708l8 8a.5.5 0 00.708-.708l-8-8a.5.5 0 00-.708 0z",clipRule:"evenodd"}),i.a.createElement("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 010 .708l-8 8a.5.5 0 01-.708-.708l8-8a.5.5 0 01.708 0z",clipRule:"evenodd"})),vdots:i.a.createElement("svg",{className:"bi bi-three-dots-vertical",width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M11.5 15a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm0-5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm0-5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",clipRule:"evenodd"}))},$=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("i",this.props,G[this.props.icon])||i.a.createElement("i",this.props)}}]),t}(a.Component),J=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleCancelEditNameClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.props.dispatch(j(n.props.file))},n.handleSubmitEditNameClick=function(e,t){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.props.dispatch(_(n.props.file,t))},n.handleSelectClick=function(e){n.props.dispatch(O(n.props.file)),n.setState({})},n.handleFileClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.props.dispatch(P(n.props.file))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.file.selected;return i.a.createElement("tr",{className:this.props.file.selected?"bg-light":"",onClick:function(){return e.handleSelectClick(t)}},i.a.createElement("td",{className:"text-nowrap"},!this.props.file.selected&&i.a.createElement($,{icon:"dir"===this.props.file.type?"folder":"text_file"}),i.a.createElement("input",{type:"checkbox",id:"select_all",checked:this.props.file.selected,style:{marginLeft:this.props.file.selected?"2px":"-15px",opacity:this.props.file.selected?"1":"0"},onChange:function(){}})),i.a.createElement("td",{className:"w-100"},!0!==this.props.file.editName&&"dir"===this.props.file.type&&i.a.createElement(m.a,{className:"text-nowrap",to:this.props.file.url+window.location.hash,onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},this.props.file.name),!0!==this.props.file.editName&&"dir"!==this.props.file.type&&i.a.createElement("button",{className:"btn btn-link p-0 text-nowrap",onClick:function(t){return e.handleFileClick(t)}},this.props.file.name),!0===this.props.file.editName&&i.a.createElement("form",{className:"form-group m-0"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"New filename","aria-label":"New filename",defaultValue:this.props.file.url,ref:function(t){return e.newurl=t}}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary pt-0 pb-0",type:"button",title:"Confirm",onClick:function(t){return e.handleSubmitEditNameClick(t,e.newurl.value)}},i.a.createElement($,{style:{fontSize:18},icon:"check"})),i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary pt-0 pb-0",type:"button",title:"Cancel",onClick:function(t){return e.handleCancelEditNameClick(t)}},i.a.createElement($,{style:{fontSize:18},icon:"cross"})))))),i.a.createElement("td",{className:"text-nowrap d-none d-sm-table-cell text-right"},i.a.createElement(U,null,this.props.file.mtime)),i.a.createElement("td",{className:"text-nowrap d-none d-sm-table-cell text-right"},i.a.createElement(V,null,this.props.file.size)))}}]),t}(a.Component),K=Object(d.b)((function(e){return{}}))(J),Q=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleCancelClick=function(){n.props.dispatch({type:"HIDE_NEW_FILE"})},n.handleSubmitNewFileClick=function(e){n.props.dispatch(L(n.props.path,e))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-nowrap"},i.a.createElement($,{icon:"text_file"})),i.a.createElement("td",{className:"w-100"},i.a.createElement("form",{className:"form-group m-0"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"New file name","aria-label":"New file name",ref:function(t){return e.newurl=t}}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary pt-0 pb-0",type:"button",title:"Confirm",onClick:function(){return e.handleSubmitNewFileClick(e.newurl.value)}},i.a.createElement($,{style:{fontSize:18},icon:"check"})),i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary pt-0 pb-0",type:"button",title:"Cancel",onClick:function(){return e.handleCancelClick()}},i.a.createElement($,{style:{fontSize:18},icon:"cross"})))))),i.a.createElement("td",{className:"text-nowrap d-none d-sm-table-cell"}),i.a.createElement("td",{className:"text-nowrap d-none d-sm-table-cell"}))}}]),t}(a.Component),Y=Object(d.b)((function(e){return{path:e.navigation.path}}))(Q),q=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleCancelClick=function(){n.props.dispatch({type:"HIDE_NEW_DIR"})},n.handleSubmitNewDirClick=function(e){n.props.dispatch(x(n.props.path,e))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-nowrap"},i.a.createElement($,{icon:"folder"})),i.a.createElement("td",{className:"w-100"},i.a.createElement("form",{className:"form-group m-0"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"New directory name","aria-label":"New directory name",ref:function(t){return e.newurl=t}}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary pt-0 pb-0",type:"button",title:"Confirm",onClick:function(){return e.handleSubmitNewDirClick(e.newurl.value)}},i.a.createElement($,{style:{fontSize:18},icon:"check"})),i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary pt-0 pb-0",type:"button",title:"Cancel",onClick:function(){return e.handleCancelClick()}},i.a.createElement($,{style:{fontSize:18},icon:"cross"})))))),i.a.createElement("td",{className:"text-nowrap d-none d-sm-table-cell"}),i.a.createElement("td",{className:"text-nowrap d-none d-sm-table-cell"}))}}]),t}(a.Component),X=Object(d.b)((function(e){return{path:e.navigation.path}}))(q),Z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={allSelected:!1},n.handleSelectAllClicked=function(e){n.props.dispatch(k(!e)),n.setState({allSelected:!e})},n.handleEditNameClick=function(){n.props.fileList.filter((function(e){return e.selected})).forEach((function(e){return n.props.dispatch(C(e))}))},n.handleDownloadfilesClick=function(){n.props.fileList.filter((function(e){return e.selected})).forEach((function(e){n.props.dispatch(T(e))}))},n.handleCompressfilesClick=function(){n.props.dispatch(S(n.props.fileList.filter((function(e){return e.selected})).map((function(e){return e.url})),n.props.path))},n.handleDeletefilesClick=function(){n.props.dispatch(I(n.props.fileList.filter((function(e){return e.selected})).map((function(e){return e.url})),n.props.path))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.fileList.filter((function(e){return e.selected}));return i.a.createElement("div",{className:this.props.className+" overflow-hidden h-100 container-fluid flex-grow-1 flex-shrink-1 position-relative"},i.a.createElement(z.a,{className:"overflow-auto h-100 position-static",onDrop:this.onDrop.bind(this),disableClick:!0,ref:function(t){e.props.dropzone.ref=t}},i.a.createElement("table",{className:"table table-hover h-auto"},i.a.createElement("thead",{className:"sticky-top bg-white shadow-sm",style:{zIndex:999}},i.a.createElement("tr",null,i.a.createElement("th",{scope:"col",onClick:function(){return e.handleSelectAllClicked(e.state.allSelected)}},i.a.createElement("input",{type:"checkbox",id:"select_all",checked:this.state.allSelected,style:{marginLeft:"2px"},onChange:function(){return e.handleSelectAllClicked(e.state.allSelected)}})),i.a.createElement("th",{scope:"col w-100"},"Name"),i.a.createElement("th",{scope:"col",className:"d-none d-sm-table-cell"},"Modified"),i.a.createElement("th",{scope:"col",className:"d-none d-sm-table-cell"},"Size"))),i.a.createElement("tbody",null,this.props.isFileListLoaded&&this.props.displayNewFile&&i.a.createElement(Y,null),this.props.isFileListLoaded&&this.props.displayNewDir&&i.a.createElement(X,null),this.props.isFileListLoaded&&this.props.fileList.filter((function(t){return t.name.includes(e.props.filter)})).sort((function(t,n){return"dir"===t.type&&"dir"===n.type?"ASC"===e.props.sort.dir?t[e.props.sort.prop]>n[e.props.sort.prop]:t[e.props.sort.prop]<n[e.props.sort.prop]:"dir"===t.type?"DSC"===e.props.sort.dir:"dir"===n.type?"ASC"===e.props.sort.dir:"ASC"===e.props.sort.dir?t[e.props.sort.prop]>n[e.props.sort.prop]:t[e.props.sort.prop]<n[e.props.sort.prop]})).map((function(e){return i.a.createElement(K,{file:e,key:e.url})}))),i.a.createElement("tfoot",{className:"position-absolute mw-100 overflow-auto",style:{bottom:t.length>0?0:-50,opacity:t.length>0?1:0,left:0,right:0,transition:"all ease .5s"}},i.a.createElement("tr",{className:"d-flex justify-content-sm-center pl-0 pr-0 pt-2 pb-2"},i.a.createElement("td",null,i.a.createElement("button",{className:"btn btn-secondary ml-2",onClick:function(){return e.handleEditNameClick()}},"Rename"),i.a.createElement("button",{className:"btn btn-secondary ml-2",onClick:function(){return e.handleDownloadfilesClick()}},"Download"),i.a.createElement("button",{className:"btn btn-secondary ml-2",onClick:function(){return e.handleCompressfilesClick()}},"Compress"),i.a.createElement("button",{className:"btn btn-danger ml-2 mr-2",onClick:function(){return e.handleDeletefilesClick()}},"Delete")))),i.a.createElement("caption",{className:"mb-5"},"".concat(t.length," of ").concat(this.props.fileList.length," selected ").concat(this.props.fileList.length>1?"files":"file"," in "),i.a.createElement("code",null,this.props.path)))))}},{key:"onDrop",value:function(e){this.props.dispatch(function(e,t){return function(n){var a=new FormData;a.append("url",t),e.forEach((function(e,t){a.append("file-"+t,e,e.name)})),fetch("/api/cloud/file",{method:"POST",credentials:"include",body:a}).then((function(e){e.ok?e.json().then((function(e){n(N(t)),n(b(e.msg,e.detail))})):e.text().then((function(t){n(y([])),n(b(e.statusText,t))}))}))}}(e,this.props.path))}}]),t}(a.Component),ee=Object(d.b)((function(e){return{fileList:e.navigation.fileList,isFileListLoaded:e.navigation.isFileListLoaded,displayHiddenFiles:e.navigation.displayHiddenFiles,displayNewDir:e.navigation.displayNewDir,displayNewFile:e.navigation.displayNewFile,path:e.navigation.path,filter:e.navigation.filter,sort:e.navigation.sort}}))(Z),te=n(12),ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={url:URL.createObjectURL(n.props.file.blob)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"text-center"},i.a.createElement("a",{href:this.state.url},i.a.createElement("img",{className:"mh-100 mw-100 h-auto w-auto",src:this.state.url,alt:"preview "+this.props.file.name+" image file"})))}}]),t}(a.Component),ae=n(20),ie=(n(49),n(14)),re=n.n(ie),le=n(19),oe=n.n(le),ce=n(52);ce.registerLanguage("css",n(53)),ce.registerLanguage("json",n(54)),ce.registerLanguage("less",n(55)),ce.registerLanguage("scss",n(56)),ce.registerLanguage("javascript",n(57)),ce.registerLanguage("typescript",n(58));var se=ce;oe.a.setOptions({renderer:new oe.a.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(e){return se.highlightAuto(e).value}});var ue=new oe.a.Renderer;ue.paragraph=function(e){return"<p>".concat(e,"</p>")},ue.link=function(e,t,n){return"<a href=".concat(e,"\n      title=").concat(t||e,"\n      target='_blank'\n      }>").concat(n,"</a>")};function pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e.value;if(e.selectionStart||0===e.selectionStart){var r=e.selectionStart,l=e.selectionEnd,o=e.scrollTop;r===l?(e.value=i.substring(0,r)+t+n+a+i.substring(l,i.length),e.selectionStart=r+t.length,e.selectionEnd=l+t.length+n.length):(e.value=i.substring(0,r)+t+i.substring(r,l)+a+i.substring(l,i.length),e.selectionStart=r+t.length,e.selectionEnd=l+t.length),e.focus(),o>=0&&(e.scrollTop=o)}}var de={h1:function(e){pe(e,"# ","title")},h2:function(e){pe(e,"## ","title")},h3:function(e){pe(e,"### ","title")},h4:function(e){pe(e,"#### ","title")},image:function(e){pe(e,"![alt](","url",")")},link:function(e){pe(e,"[title](","url",")")},code:function(e){pe(e,"```","language","\n\n```")},tab:function(e){pe(e,"  ")}},fe={zh:{placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9...",undo:"\u4e0a\u4e00\u6b65 (ctrl+z)",redo:"\u4e0b\u4e00\u6b65 (ctrl+y)",h1:"\u4e00\u7ea7\u6807\u9898",h2:"\u4e8c\u7ea7\u6807\u9898",h3:"\u4e09\u7ea7\u6807\u9898",h4:"\u56db\u7ea7\u6807\u9898",image:"\u56fe\u7247",link:"\u8d85\u94fe\u63a5",code:"\u4ee3\u7801\u5757",save:"\u4fdd\u5b58 (ctrl+s)"},en:{placeholder:"Please enter the content...",undo:"Undo (ctrl+z)",redo:"Redo (ctrl+y)",h1:"Level one title",h2:"Level two title",h3:"Level three title",h4:"Level four title",image:"Image",link:"Hyperlink",code:"Code block",save:"Save (ctrl+s)"}},he=83,me=90,be=89,ve=9,Ee=(n(59),n(60),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;n.saveHistory(t),n.props.onChange(t)},n.insert=function(e){var t=Object(ae.a)(n).$vm;!function(e,t){de[t](e)}(t,e.currentTarget?e.currentTarget.getAttribute("data-type"):e),n.props.onChange(t.value),n.saveHistory(t.value)},n.undo=function(){var e=n.state.f_history,t=n.state.f_history_index;if(!((t-=1)<0)){n.setState({f_history_index:t});var a=e[t];n.props.onChange(a),n.handleLineIndex(a)}},n.redo=function(){var e=n.state.f_history,t=n.state.f_history_index;if(!((t+=1)>=e.length)){n.setState({f_history_index:t});var a=e[t];n.props.onChange(a),n.handleLineIndex(a)}},n.preview=function(){n.setState({preview:!n.state.preview})},n.expand=function(){n.setState({expand:!n.state.expand})},n.save=function(){n.props.allowsave&&n.props.onSave()},n.$vm=null,n.handleEditorRef=function(e){n.$vm=e},n.state={preview:!1,expand:!1,f_history:[],f_history_index:0,line_index:1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e;(e=this).$vm.addEventListener("keydown",(function(t){if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey){if((t.ctrlKey||t.metaKey)&&!t.altKey&&!t.shiftKey)switch(t.keyCode){case me:t.preventDefault(),e.undo();break;case be:t.preventDefault(),e.redo();break;case he:t.preventDefault(),e.save()}}else switch(t.keyCode){case ve:t.preventDefault(),e.insert("tab")}})),this.handleLineIndex(this.props.value)}},{key:"componentWillUpdate",value:function(e,t){var n=this.state.f_history;e.value&&0===t.f_history.length&&(n.push(e.value),this.setState({f_history:n}),this.handleLineIndex(e.value))}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.handleLineIndex(e.value)}},{key:"saveHistory",value:function(e){var t=this,n=this.state,a=n.f_history,i=n.f_history_index;window.clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout((function(){i<a.length-1&&a.splice(i+1),a.length>=20&&a.shift(),i=a.length,a.push(e),t.setState({f_history:a,f_history_index:i})}),500),this.handleLineIndex(e)}},{key:"handleLineIndex",value:function(e){var t=e?e.split("\n").length:1;this.setState({line_index:t})}},{key:"render",value:function(){var e,t=this.state,n=t.preview,a=t.expand,r=t.line_index,l=this.props.value,o=re()({"for-panel":!0,"for-preview-hidden":!n}),c=re()({"for-panel":!0}),s=re()({"for-active":n}),u=re()({"for-container":!0,"for-fullscreen":a}),p=re()({"for-active":a}),d=re()({"for-line-num":!0,hidden:!this.props.lineNum});return i.a.createElement("div",{className:u,style:{height:this.props.height}},i.a.createElement("div",{className:"for-controlbar"},i.a.createElement("ul",{className:"for-controlbar_md"},i.a.createElement("li",{onClick:this.undo,title:fe[this.props.lang].undo},i.a.createElement("i",{className:"foricon for-undo"})),i.a.createElement("li",{onClick:this.redo,title:fe[this.props.lang].redo},i.a.createElement("i",{className:"foricon for-redo"})),this.props.controlbar&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",{"data-type":"h1",onClick:this.insert,title:fe[this.props.lang].h1},"H1"),i.a.createElement("li",{"data-type":"h2",onClick:this.insert,title:fe[this.props.lang].h2},"H2"),i.a.createElement("li",{"data-type":"h3",onClick:this.insert,title:fe[this.props.lang].h3},"H3"),i.a.createElement("li",{"data-type":"h4",onClick:this.insert,title:fe[this.props.lang].h4},"H4"),i.a.createElement("li",{"data-type":"image",onClick:this.insert,title:fe[this.props.lang].image},i.a.createElement("i",{className:"foricon for-image"})),i.a.createElement("li",{"data-type":"link",onClick:this.insert,title:fe[this.props.lang].link},i.a.createElement("i",{className:"foricon for-link"})),i.a.createElement("li",{"data-type":"code",onClick:this.insert,title:fe[this.props.lang].code},i.a.createElement("i",{className:"foricon for-code"})))),i.a.createElement("ul",{className:"for-controlbar_tools"},this.props.allowsave&&i.a.createElement("li",{"data-type":"code",onClick:this.save,title:fe[this.props.lang].save},i.a.createElement("i",{className:"foricon for-save"})),this.props.allowfullscreen&&i.a.createElement("li",{className:p,onClick:this.expand},p?i.a.createElement("i",{className:"foricon for-contract"}):i.a.createElement("i",{className:"foricon for-expand"})),this.props.allowpreview&&i.a.createElement("li",{className:s,onClick:this.preview},s?i.a.createElement("i",{className:"foricon for-eye-off"}):i.a.createElement("i",{className:"foricon for-eye"})))),i.a.createElement("div",{className:"for-editor"},i.a.createElement("div",{className:c},i.a.createElement("div",{className:"for-editor-wrapper"},i.a.createElement("div",{className:"for-editor-block"},function(){for(var e=[],t=0;t<r;t++)e.push(i.a.createElement("li",{key:t+1},t+1));return i.a.createElement("ul",{className:d},e)}(),i.a.createElement("div",{className:"for-editor-content"},i.a.createElement("pre",null,l," "),i.a.createElement("textarea",{wrap:"soft",ref:this.handleEditorRef,value:l,onChange:this.handleChange,placeholder:fe[this.props.lang].placeholder}))))),i.a.createElement("div",{className:o},i.a.createElement("div",{className:"for-preview for-markdown-preview",dangerouslySetInnerHTML:{__html:(e=l,"string"!==typeof e?"":oe()(e,{renderer:ue}))}}))))}}]),t}(i.a.Component));Ee.defaultProps={lineNum:!0,height:"600px",controlbar:!0,allowfullscreen:!0,allowpreview:!0,allowsave:!0,lang:"zh"};var ge=Ee,ye=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleSaveClick=function(){n.props.dispatch(W(n.props.file.url,n.props.file.content))},n.handleValueChange=function(e){n.props.file.content=e,n.setState({})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=new FileReader;t.onload=function(){e.handleValueChange(t.result)},t.readAsText(this.props.file.blob)}},{key:"render",value:function(){return i.a.createElement(ge,{lang:"en",controlbar:this.props.file.url.match(/\.md$/),allowfullscreen:!0,allowpreview:this.props.file.url.match(/\.(md|html|htm)$/),allowsave:!0,value:this.props.file.content,onChange:this.handleValueChange.bind(this),onSave:this.handleSaveClick.bind(this)})}}]),t}(a.Component),we=Object(d.b)((function(e){return{}}))(ye),Ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={url:URL.createObjectURL(n.props.file.blob)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("embed",{className:"h-100 w-100",src:this.state.url,alt:"pdf",pluginspage:"http://www.adobe.com/products/acrobat/readstep2.html"})}}]),t}(a.Component),Oe=n(37),ke=n.n(Oe),Ce=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("img",{src:ke.a,alt:"Error"})}}]),t}(a.Component),je=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={zip:[]},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"process",value:function(e){var t=[],n=[],a=!0,i=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var c=l.value;if(!c.directory){var s=c.filename.split(/\/(?=[^\/]+$)/),u={name:s[s.length-1],type:"file",size:c.uncompressedSize,mtime:1e5*c.lastModDateRaw,entry:c};s.length>1&&"undefined"===typeof n[s[0]]&&p(s[0]),s.length>1?n[s[0]].push(u):t.push(u)}}}catch(d){i=!0,r=d}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}function p(e){var a=e.split(/\/(?=[^\/]+$)/),i={name:a[a.length-1],type:"dir",content:[]};n[e]=i.content,a.length>1&&"undefined"===typeof n[a[0]]&&p(a[0]),a.length>1?n[a[0]].push(i):t.push(i)}this.setState({zip:t})}},{key:"tmp",value:function(){var e=this;window.zip.createReader(new window.zip.BlobReader(this.props.file.blob),(function(t){t.getEntries((function(t){t.length&&e.process(t)})),window.setTimeout((function(){t.close()}),3e4)}),(function(e){}))}},{key:"componentWillMount",value:function(){this.tmp()}},{key:"render",value:function(){return i.a.createElement("div",null,this.state.zip.map((function(e){return"dir"===e.type&&i.a.createElement(xe,{dir:e})||i.a.createElement(Le,{file:e})})))}}]),t}(a.Component),xe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={expanded:!1},n.handleClick=function(){n.setState((function(e){return{expanded:!e.expanded}}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{"aria-expanded":this.state.expanded},i.a.createElement("button",{className:"btn btn-light w-100 text-left",onClick:this.handleClick},i.a.createElement("span",{className:"mr-2"},i.a.createElement($,{icon:"folder"})),i.a.createElement("span",{className:"mr-2"},this.props.dir.name)),i.a.createElement("div",{className:"ml-3 pl-3 border-left"},this.props.dir.content.map((function(e){return"dir"===e.type&&i.a.createElement(t,{dir:e})||i.a.createElement(Le,{file:e})}))))}}]),t}(a.Component),Le=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex align-items-center p-1"},i.a.createElement($,{className:"mr-2",icon:"text_file"}),i.a.createElement("span",{className:"flex-grow-1 mr-2"},this.props.file.name),i.a.createElement(V,{className:"mr-2"},this.props.file.size))}}]),t}(a.Component),_e=Object(d.b)((function(e){return{}}))(je),Se=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{class:"spinner-border text-primary d-block mx-auto my-3",role:"status"},i.a.createElement("span",{class:"sr-only"},"Loading..."))}}]),t}(a.Component),Ie=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleTabClick=function(e,t){n.props.dispatch(B(t))},n.handleCloseTabClick=function(e,t){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.props.dispatch(H(t))},n.addButton=function(e,t,a){"undefined"===typeof e.actions?e.actions=[{label:t,click:a}]:"undefined"===typeof e.actions?e.actions=[{label:t,click:a}]:e.actions=[].concat(Object(te.a)(e.actions),[{label:t,click:a}]),n.setState({})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",{className:"sticky-top bg-white",style:{zIndex:100}},i.a.createElement("ol",{className:"nav nav-tabs",role:"tablist"},this.props.previewFiles.map((function(t,n){return i.a.createElement("li",{key:t.url,className:"nav-item",role:"tab","aria-selected":n===e.props.activePreview},i.a.createElement("button",{role:"tab",className:"nav-link".concat(n===e.props.activePreview?" active":""," bg-transparent"),id:"preview-"+n,onClick:function(){return e.handleTabClick(t,n)},title:t.url},t.name,i.a.createElement("button",{className:"ml-2 mb-1 close","aria-label":"Close",onClick:function(n){return e.handleCloseTabClick(n,t.url)}},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))})))),i.a.createElement("main",{className:"flex-grow-1",style:{borderLeft:"1px solid #dee2e6",borderRight:"1px solid #dee2e6"}},this.props.previewFiles.map((function(t,n){return i.a.createElement("div",{key:t.url,role:"tabpanel",className:"h-100 p-2","aria-labelledby":"preview-"+n,hidden:n!==e.props.activePreview},"undefined"!=typeof t.blob&&(t.blob.type.match(/^image\/.*/)&&i.a.createElement(ne,{file:t})||t.blob.type.match(/^(text\/.*|inode\/x-empty)/)&&i.a.createElement(we,{file:t})||"application/pdf"===t.blob.type&&i.a.createElement(Ne,{file:t})||"application/zip"===t.blob.type&&i.a.createElement(_e,{file:t}))||t.isContentLoaded&&i.a.createElement(Ce,null)||i.a.createElement(Se,null))}))))}}]),t}(a.Component),Te=Object(d.b)((function(e){return{previewFiles:e.preview.fileList,activePreview:e.preview.activePreview}}))(Ie),Fe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleCloseClicked=function(e){n.props.dispatch(v(e))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{position:"absolute",bottom:0,right:0}},this.props.notifications.map((function(t){return i.a.createElement("div",{class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",key:t.id},i.a.createElement("div",{class:"toast-header"},i.a.createElement("strong",{class:"mr-auto"},t.shortText),i.a.createElement("button",{type:"button",class:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:function(t){return e.handleCloseClicked(t)}},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),i.a.createElement("div",{class:"toast-body"},t.longText))})))}}]),t}(a.Component),Re=Object(d.b)((function(e){return{notifications:e.notifications.notifications}}))(Fe),De=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleSortByName=function(){n.props.dispatch(F("name"))},n.handleSortBySize=function(){n.props.dispatch(F("size"))},n.handleSortByDate=function(){n.props.dispatch(F("mtime"))},n.handleFilterChanged=function(e){n.props.dispatch(R(e.target.value))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.dispatch(w(this.props.location.pathname)),this.unlisten=this.props.history.listen((function(t,n){switch(n){case"PUSH":case"POP":e.props.dispatch(w(t.pathname))}}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this;return this.dropzone={},i.a.createElement("section",{className:"container-fluid h-100"},i.a.createElement("div",{className:"row h-100"},i.a.createElement("main",{className:"col-12 -col-lg-9 -col-xl-10 overflow-hidden h-100 position-static d-flex flex-column"},i.a.createElement("nav",{className:"navbar navbar-expand navbar-light pl-0 pr-0"},i.a.createElement("div",{className:"collapse navbar-collapse row"},i.a.createElement("div",{className:"overflow-visible d-flex align-items-center pl-3 pr-3",style:{maxWidth:"100vw"}},i.a.createElement(A,{data:this.props.breadcrumb,dropzone:this.dropzone})),i.a.createElement("div",{className:"navbar-collapse -col-12 -col-lg-4"},i.a.createElement("ul",{className:"navbar-nav ml-auto"},i.a.createElement(h,{className:"nav-item",tag:"li",btn:{text:"Sort",tag:"button",attrs:{className:"nav-link btn btn-link"}}},i.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleSortByName()}},"By name"),i.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleSortBySize()}},"By size"),i.a.createElement("button",{className:"dropdown-item",onClick:function(){return e.handleSortByDate()}},"By date"))),i.a.createElement("form",{className:"form-inline my-2 my-md-0 pl-3 pr-3"},i.a.createElement("input",{className:"form-control",type:"filter",placeholder:"Filter","aria-label":"Filter",onChange:function(t){return e.handleFilterChanged(t)}}))))),i.a.createElement("div",{className:"row flex-grow-1 flex-shrink-1 overflow-hidden"},i.a.createElement(ee,{className:"".concat(this.props.preview.length?"col-xl-4 d-none d-xl-block":"col-xl-12"),dropzone:this.dropzone}),i.a.createElement("div",{className:this.props.preview.length?"col-12 col-xl-8 h-100 overflow-auto d-flex flex-column":"w-0 overflow-hidden"},i.a.createElement(Te,null))),i.a.createElement(Re,null))))}}]),t}(a.Component),Ae=Object(d.b)((function(e){return{preview:e.preview.fileList,breadcrumb:e.navigation.breadcrumb}}))(De),ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var He=n(64),Me=n(65),Be=n(13),We=n(38),Ve={fileList:[],isFileListLoaded:!0,previewFileList:[],breadcrumb:[],displayHiddenFiles:!1,displayNewDir:!1,displayNewFile:!1,path:"/",filter:"",sort:{prop:"name",dir:"ASC"}},Ue={fileList:[],activePreview:0},Ge={notifications:[]},$e=Object(Be.c)({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_FILE_LIST":return Object(f.a)({},e,{fileList:t.fileList,isFileListLoaded:!0});case"REFRESH_FILE_LIST":return Object(f.a)({},e,{fileList:t.fileList.map((function(t,n,a){return Object(f.a)({},e.fileList.filter((function(e,n,a){return n===a.map((function(e){return e.url})).indexOf(t.url)}))[0],{},t)}))});case"ADD_FILE":return Object(f.a)({},e,{fileList:[].concat(Object(te.a)(e.fileList),[t.file])});case"REMOVE_FILE":return Object(f.a)({},e,{fileList:e.fileList.filter((function(e){return e.url!==t.file.url}))});case"TOGGLE_SELECT_FILE":return Object(f.a)({},e,{fileList:e.fileList.map((function(e){return e.url===t.file.url?Object(f.a)({},e,{selected:!e.selected}):e}))});case"SELECT_ALL_FILES":return Object(f.a)({},e,{fileList:e.fileList.map((function(e){return Object(f.a)({},e,{selected:t.selectStatus})}))});case"REQUEST_FILE_LIST":return Object(f.a)({},e,{breadcrumb:t.breadcrumb,path:t.path,isFileListLoaded:!1});case"ENABLE_FILE_EDIT_NAME":return Object(f.a)({},e,{fileList:e.fileList.map((function(e){return e.url===t.file.url?Object(f.a)({},e,{editName:!0}):e}))});case"DISABLE_FILE_EDIT_NAME":return Object(f.a)({},e,{fileList:e.fileList.map((function(e){return e.url===t.file.url?Object(f.a)({},e,{editName:!1}):e}))});case"TOGGLE_NEW_DIR":return Object(f.a)({},e,{displayNewDir:!e.displayNewDir});case"TOGGLE_NEW_FILE":return Object(f.a)({},e,{displayNewFile:!e.displayNewFile});case"HIDE_NEW_DIR":return Object(f.a)({},e,{displayNewDir:!1});case"HIDE_NEW_FILE":return Object(f.a)({},e,{displayNewFile:!1});case"TOGGLE_HIDDEN_FILES":return Object(f.a)({},e,{displayHiddenFiles:!e.displayHiddenFiles});case"UPDATE_FILTER":return Object(f.a)({},e,{filter:t.filter});case"SORT_BY":return Object(f.a)({},e,{sort:{prop:t.prop,dir:t.prop===e.sort.prop&&"ASC"===e.sort.dir?"DSC":"ASC"}});default:return e}},preview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PREVIEW_FILE":return-1===e.fileList.map((function(e){return e.url})).indexOf(t.file.url)?Object(f.a)({},e,{fileList:[].concat(Object(te.a)(e.fileList),[{url:t.file.url,name:t.file.name}]),activePreview:e.fileList.length}):Object(f.a)({},e,{activePreview:e.fileList.map((function(e){return e.url})).indexOf(t.file.url)});case"REMOVE_PREVIEW_FILE":return Object(f.a)({},e,{fileList:e.fileList.filter((function(e){return e.url!==t.url})),activePreview:e.fileList.map((function(e){return e.url})).indexOf(t.url)<=e.activePreview?0===e.activePreview?e.activePreview:e.activePreview-1:e.activePreview});case"REQUEST_PREVIEW_CONTENT":return Object(f.a)({},e,{fileList:e.fileList.map((function(e){return e.url===t.file.url?Object(f.a)({},e,{isContentLoaded:!1}):e}))});case"RECEIVE_PREVIEW_CONTENT":return Object(f.a)({},e,{fileList:e.fileList.map((function(e){return e.url===t.file.url?Object(f.a)({},e,{blob:t.blob,isContentLoaded:!0}):e}))});case"UPDATE_PREVIEW_TAB":return Object(f.a)({},e,{activePreview:t.index});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTIFICATION":return Object(f.a)({},e,{notifications:[].concat(Object(te.a)(e.notifications),[t.notification])});case"REMOVE_NOTIFICATION":return Object(f.a)({},e,{notifications:e.notifications.filter((function(e){return e.id!==t.notification.id}))});default:return e}}}),Je=Object(Be.d)($e,{},Object(Be.a)(We.a));l.a.render(i.a.createElement(d.a,{store:Je},i.a.createElement(He.a,{basename:"/"},i.a.createElement(Me.a,{path:"/",render:function(e){return i.a.createElement(Ae,e)}}))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ze?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pe(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Pe(e)}))}}()}},[[41,1,2]]]);
//# sourceMappingURL=main.45fe08a8.chunk.js.map